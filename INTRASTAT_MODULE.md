# INTRASTAT –ú–æ–¥—É–ª - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üåç –û–±—â –ø—Ä–µ–≥–ª–µ–¥

INTRASTAT –º–æ–¥—É–ª—ä—Ç –µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–∞–Ω–∞ —á–∞—Å—Ç –æ—Ç RS-AC-BG —Å—á–µ—Ç–æ–≤–æ–¥–Ω–∞—Ç–∞ —Å–∏—Å—Ç–µ–º–∞, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –∑–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –¥–µ–∫–ª–∞—Ä–∞—Ü–∏–∏ –∑–∞ –≤—ä—Ç—Ä–µ–æ–±—â–Ω–æ—Å—Ç–Ω–∞ —Ç—ä—Ä–≥–æ–≤–∏—è —Å—ä–≥–ª–∞—Å–Ω–æ –∏–∑–∏—Å–∫–≤–∞–Ω–∏—è—Ç–∞ –Ω–∞ –ù–ê–ü –∏ –ï–° —Ä–µ–≥–ª–∞–º–µ–Ω—Ç–∏—Ç–µ.

## üìã –°—ä–¥—ä—Ä–∂–∞–Ω–∏–µ

- [–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–Ω–æ—Å—Ç–∏](#—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–Ω–æ—Å—Ç–∏)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
- [–ë–∞–∑–∞ –¥–∞–Ω–Ω–∏](#–±–∞–∑–∞-–¥–∞–Ω–Ω–∏)
- [Backend API](#backend-api)
- [Frontend](#frontend)
- [–ò–Ω—Å—Ç–∞–ª–∞—Ü–∏—è](#–∏–Ω—Å—Ç–∞–ª–∞—Ü–∏—è)
- [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
- [XML –µ–∫—Å–ø–æ—Ä—Ç](#xml-–µ–∫—Å–ø–æ—Ä—Ç)
- [–¢–µ—Å—Ç–≤–∞–Ω–µ](#—Ç–µ—Å—Ç–≤–∞–Ω–µ)

## üîß –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–Ω–æ—Å—Ç–∏

### –û—Å–Ω–æ–≤–Ω–∏ –≤—ä–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–æ—Å–ª–µ–¥—è–≤–∞–Ω–µ –Ω–∞ –ø—Ä–∞–≥–æ–≤–µ** - 400,000 –ª–≤. –∑–∞ –≤—Ö–æ–¥—è—â–∏/–∏–∑—Ö–æ–¥—è—â–∏
- ‚úÖ **–°–≤—ä—Ä–∑–≤–∞–Ω–µ –Ω–∞ —Å–º–µ—Ç–∫–∏ —Å –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞** - –æ–ø—Ü–∏–æ–Ω–∞–ª–Ω–æ –ø—Ä–∏ –Ω–∞–¥–≤–∏—à–µ–Ω–∏ –ø—Ä–∞–≥–æ–≤–µ
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ –Ω–∞ –¥–µ–∫–ª–∞—Ä–∞—Ü–∏–∏** –æ—Ç –∂—É—Ä–Ω–∞–ª–Ω–∏—Ç–µ –∑–∞–ø–∏—Å–∏
- ‚úÖ **XML –µ–∫—Å–ø–æ—Ä—Ç** —Å–ø–æ—Ä–µ–¥ —Ñ–æ—Ä–º–∞—Ç–∞ –Ω–∞ –ù–ê–ü (–≤–µ—Ä—Å–∏—è 2022)
- ‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ CN –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞** —Å –∏–º–ø–æ—Ä—Ç –æ—Ç CSV
- ‚úÖ **–î–µ—Ç–∞–π–ª–Ω–∏ —Å–ø—Ä–∞–≤–∫–∏** –ø–æ —Å—Ç—Ä–∞–Ω–∏, –ø–µ—Ä–∏–æ–¥–∏ –∏ –∫–æ–¥–æ–≤–µ
- ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –¥–∞–Ω–Ω–∏** –ø—Ä–µ–¥–∏ –ø–æ–¥–∞–≤–∞–Ω–µ
- ‚úÖ **–ú–Ω–æ–≥–æ–µ–∑–∏—á–Ω–∞ –ø–æ–¥–¥—Ä—ä–∂–∫–∞** (–ë–ì/EN)

### –¢–∏–ø–æ–≤–µ –¥–µ–∫–ª–∞—Ä–∞—Ü–∏–∏:
- **–ü—Ä–∏—Å—Ç–∏–≥–∞–Ω–∏—è (ARRIVAL)** - –≤–Ω–æ—Å –æ—Ç –¥—Ä—É–≥–∏ –ï–° —Å—Ç—Ä–∞–Ω–∏
- **–ò–∑–ø—Ä–∞—â–∞–Ω–∏—è (DISPATCH)** - –∏–∑–Ω–æ—Å –∫—ä–º –¥—Ä—É–≥–∏ –ï–° —Å—Ç—Ä–∞–Ω–∏

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### Backend (Rust + SeaORM)
```
backend/src/
‚îú‚îÄ‚îÄ entities/
‚îÇ   ‚îú‚îÄ‚îÄ intrastat_nomenclature.rs      # CN –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ intrastat_account_mapping.rs   # –°–≤—ä—Ä–∑–≤–∞–Ω–µ —Å–º–µ—Ç–∫–∏-–Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ intrastat_declaration.rs       # –î–µ–∫–ª–∞—Ä–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ intrastat_declaration_item.rs  # –ê—Ä—Ç–∏–∫—É–ª–∏ –≤ –¥–µ–∫–ª–∞—Ä–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ intrastat_settings.rs          # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞ –∫–æ–º–ø–∞–Ω–∏—è—Ç–∞
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ intrastat_service.rs           # –ë–∏–∑–Ω–µ—Å –ª–æ–≥–∏–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ intrastat_xml_export.rs        # XML –µ–∫—Å–ø–æ—Ä—Ç
‚îî‚îÄ‚îÄ graphql/
    ‚îî‚îÄ‚îÄ intrastat_resolver.rs           # GraphQL API
```

### Frontend (React)
```
frontend/src/
‚îú‚îÄ‚îÄ components/Intrastat/
‚îÇ   ‚îú‚îÄ‚îÄ IntrastatDashboard.jsx         # –û—Å–Ω–æ–≤–Ω–æ —Ç–∞–±–ª–æ
‚îÇ   ‚îú‚îÄ‚îÄ IntrastatReports.jsx           # –°–ø—Ä–∞–≤–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ IntrastatSettings.jsx          # –ù–∞—Å—Ç—Ä–æ–π–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ index.jsx                      # –ï–∫—Å–ø–æ—Ä—Ç–∏
‚îî‚îÄ‚îÄ pages/
    ‚îî‚îÄ‚îÄ Intrastat.jsx                  # –ì–ª–∞–≤–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å —Ç–∞–±–æ–≤–µ
```

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω–∏

### –û—Å–Ω–æ–≤–Ω–∏ —Ç–∞–±–ª–∏—Ü–∏:

#### `intrastat_nomenclature`
```sql
CREATE TABLE intrastat_nomenclature (
    id SERIAL PRIMARY KEY,
    cn_code VARCHAR(10) NOT NULL UNIQUE,        -- CN –∫–æ–¥ (8 —Ü–∏—Ñ—Ä–∏)
    description_bg TEXT NOT NULL,               -- –û–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ –±—ä–ª–≥–∞—Ä—Å–∫–∏
    description_en TEXT,                        -- –û–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏
    unit_of_measure VARCHAR(20) NOT NULL,       -- –ú–µ—Ä–Ω–∞ –µ–¥–∏–Ω–∏—Ü–∞
    unit_description VARCHAR(100) NOT NULL,     -- –û–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ –º–µ—Ä–Ω–∞—Ç–∞ –µ–¥–∏–Ω–∏—Ü–∞
    parent_code VARCHAR(10),                    -- –†–æ–¥–∏—Ç–µ–ª—Å–∫–∏ –∫–æ–¥
    level INTEGER NOT NULL DEFAULT 0,           -- –ù–∏–≤–æ –≤ –π–µ—Ä–∞—Ä—Ö–∏—è—Ç–∞
    is_active BOOLEAN NOT NULL DEFAULT true,    -- –ê–∫—Ç–∏–≤–µ–Ω –∑–∞–ø–∏—Å
    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP
);
```

#### `intrastat_account_mapping`
```sql
CREATE TABLE intrastat_account_mapping (
    id SERIAL PRIMARY KEY,
    account_id INTEGER NOT NULL REFERENCES accounts(id),
    nomenclature_id INTEGER NOT NULL REFERENCES intrastat_nomenclature(id),
    flow_direction VARCHAR(10) NOT NULL CHECK (flow_direction IN ('ARRIVAL', 'DISPATCH')),
    transaction_nature_code VARCHAR(5) NOT NULL,    -- –í–∏–¥ —Å–¥–µ–ª–∫–∞ (11, 12, 21, ...)
    is_quantity_tracked BOOLEAN NOT NULL DEFAULT true,
    default_country_code VARCHAR(2),                -- –°—Ç—Ä–∞–Ω–∞ –ø–æ –ø–æ–¥—Ä–∞–∑–±–∏—Ä–∞–Ω–µ
    default_transport_mode INTEGER,                 -- –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç –ø–æ –ø–æ–¥—Ä–∞–∑–±–∏—Ä–∞–Ω–µ
    is_optional BOOLEAN NOT NULL DEFAULT false,     -- –û–ø—Ü–∏–æ–Ω–∞–ª–Ω–æ —Å–≤—ä—Ä–∑–≤–∞–Ω–µ
    min_threshold_bgn DECIMAL(15, 2),              -- –ú–∏–Ω–∏–º–∞–ª–µ–Ω –ø—Ä–∞–≥ –≤ –ª–≤.
    company_id INTEGER NOT NULL REFERENCES companies(id),
    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP
);
```

#### `intrastat_declaration`
```sql
CREATE TABLE intrastat_declaration (
    id SERIAL PRIMARY KEY,
    company_id INTEGER NOT NULL REFERENCES companies(id),
    declaration_type VARCHAR(10) NOT NULL CHECK (declaration_type IN ('ARRIVAL', 'DISPATCH')),
    reference_period VARCHAR(6) NOT NULL,           -- YYYYMM —Ñ–æ—Ä–º–∞—Ç
    year INTEGER NOT NULL,
    month INTEGER NOT NULL CHECK (month >= 1 AND month <= 12),
    declaration_number VARCHAR(50),                 -- –ù–æ–º–µ—Ä –æ—Ç –ù–ê–ü
    declarant_eik VARCHAR(20) NOT NULL,            -- –ï–ò–ö –Ω–∞ –¥–µ–∫–ª–∞—Ä–∞—Ç–æ—Ä–∞
    declarant_name VARCHAR(200) NOT NULL,          -- –ò–º–µ –Ω–∞ –¥–µ–∫–ª–∞—Ä–∞—Ç–æ—Ä–∞
    contact_person VARCHAR(200) NOT NULL,          -- –õ–∏—Ü–µ –∑–∞ –∫–æ–Ω—Ç–∞–∫—Ç
    contact_phone VARCHAR(50) NOT NULL,            -- –¢–µ–ª–µ—Ñ–æ–Ω
    contact_email VARCHAR(200) NOT NULL,           -- –ò–º–µ–π–ª
    total_items INTEGER NOT NULL DEFAULT 0,         -- –û–±—â –±—Ä–æ–π –∞—Ä—Ç–∏–∫—É–ª–∏
    total_statistical_value DECIMAL(15, 2) NOT NULL DEFAULT 0.00,
    total_invoice_value DECIMAL(15, 2) NOT NULL DEFAULT 0.00,
    status VARCHAR(15) NOT NULL DEFAULT 'DRAFT',   -- DRAFT/SUBMITTED/ACCEPTED/REJECTED
    submission_date TIMESTAMP WITH TIME ZONE,      -- –î–∞—Ç–∞ –Ω–∞ –ø–æ–¥–∞–≤–∞–Ω–µ
    xml_file_path TEXT,                            -- –ü—ä—Ç –¥–æ XML —Ñ–∞–π–ª
    created_by INTEGER NOT NULL REFERENCES users(id),
    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP
);
```

#### `intrastat_settings`
```sql
CREATE TABLE intrastat_settings (
    id SERIAL PRIMARY KEY,
    company_id INTEGER NOT NULL REFERENCES companies(id),
    is_enabled BOOLEAN NOT NULL DEFAULT false,
    arrival_threshold_bgn DECIMAL(15, 2) NOT NULL DEFAULT 400000.00,     -- –ü—Ä–∞–≥ –∑–∞ –≤—Ö–æ–¥—è—â–∏
    dispatch_threshold_bgn DECIMAL(15, 2) NOT NULL DEFAULT 400000.00,    -- –ü—Ä–∞–≥ –∑–∞ –∏–∑—Ö–æ–¥—è—â–∏
    current_arrival_threshold_bgn DECIMAL(15, 2) NOT NULL DEFAULT 0.00,  -- –¢–µ–∫—É—â–æ –∑–∞ –≤—Ö–æ–¥—è—â–∏
    current_dispatch_threshold_bgn DECIMAL(15, 2) NOT NULL DEFAULT 0.00, -- –¢–µ–∫—É—â–æ –∑–∞ –∏–∑—Ö–æ–¥—è—â–∏
    auto_generate_declarations BOOLEAN NOT NULL DEFAULT false,           -- –ê–≤—Ç–æ –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ
    default_transport_mode INTEGER,                                     -- –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç –ø–æ –ø–æ–¥—Ä.
    default_delivery_terms VARCHAR(10),                                 -- –£—Å–ª–æ–≤–∏—è –¥–æ—Å—Ç–∞–≤–∫–∞
    default_transaction_nature VARCHAR(5),                              -- –í–∏–¥ —Å–¥–µ–ª–∫–∞ –ø–æ –ø–æ–¥—Ä.
    responsible_person_name VARCHAR(200),                               -- –û—Ç–≥–æ–≤–æ—Ä–Ω–æ –ª–∏—Ü–µ
    responsible_person_phone VARCHAR(50),
    responsible_person_email VARCHAR(200),
    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP
);
```

## üîå Backend API

### GraphQL Queries

```graphql
# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞ –∫–æ–º–ø–∞–Ω–∏—è—Ç–∞
query GetIntrastatSettings($companyId: Int!) {
  intrastatSettings(companyId: $companyId) {
    id
    isEnabled
    arrivalThresholdBgn
    dispatchThresholdBgn
    currentArrivalThresholdBgn
    currentDispatchThresholdBgn
  }
}

# –ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞ —Å —Ç—ä—Ä—Å–µ–Ω–µ
query GetNomenclatures($search: String, $limit: Int) {
  intrastatNomenclatures(search: $search, limit: $limit) {
    id
    cnCode
    descriptionBg
    unitOfMeasure
  }
}

# –î–µ–∫–ª–∞—Ä–∞—Ü–∏–∏ –ø–æ –ø–µ—Ä–∏–æ–¥
query GetDeclarations($companyId: Int!, $year: Int, $month: Int) {
  intrastatDeclarations(companyId: $companyId, year: $year, month: $month) {
    id
    declarationType
    referencePeriod
    totalItems
    totalInvoiceValue
    status
  }
}

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—Ä–∞–≥–æ–≤–µ
query CheckThreshold($companyId: Int!) {
  checkIntrastatThreshold(companyId: $companyId) {
    arrivalExceeded
    dispatchExceeded
  }
}
```

### GraphQL Mutations

```graphql
# –°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –¥–µ–∫–ª–∞—Ä–∞—Ü–∏—è
mutation CreateDeclaration($input: CreateIntrastatDeclarationInput!) {
  createIntrastatDeclaration(input: $input) {
    id
    declarationType
    year
    month
  }
}

# –ò–º–ø–æ—Ä—Ç –Ω–∞ –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞
mutation ImportNomenclature($csvData: String!) {
  importIntrastatNomenclature(csvData: $csvData) {
    success
    importedCount
    message
  }
}

# –ï–∫—Å–ø–æ—Ä—Ç –≤ XML
mutation ExportXml($declarationId: Int!) {
  exportIntrastatXml(declarationId: $declarationId)
}

# –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –¥–µ–∫–ª–∞—Ä–∞—Ü–∏—è
mutation ValidateDeclaration($declarationId: Int!) {
  validateIntrastatDeclaration(declarationId: $declarationId) {
    isValid
    errors
  }
}
```

## üé® Frontend

### –ù–∞–≤–∏–≥–∞—Ü–∏—è
–ú–æ–¥—É–ª—ä—Ç –µ –¥–æ—Å—Ç—ä–ø–µ–Ω –æ—Ç –≥–ª–∞–≤–Ω–æ—Ç–æ –º–µ–Ω—é:
```
–°—á–µ—Ç–æ–≤–æ–¥—Å—Ç–≤–æ > üåç INTRASTAT
```

### –¢–∞–±–æ–≤–µ:
1. **üìä –¢–∞–±–ª–æ** - –ü—Ä–µ–≥–ª–µ–¥ –Ω–∞ —Å—Ç–∞—Ç—É—Å, –ø—Ä–∞–≥–æ–≤–µ –∏ –¥–µ–∫–ª–∞—Ä–∞—Ü–∏–∏
2. **üìà –°–ø—Ä–∞–≤–∫–∏** - –î–µ—Ç–∞–π–ª–Ω–∏ –∞–Ω–∞–ª–∏–∑–∏ –∏ –µ–∫—Å–ø–æ—Ä—Ç–∏
3. **‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏** - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ —Å–≤—ä—Ä–∑–≤–∞–Ω–∏—è

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:
- `IntrastatDashboard` - –û—Å–Ω–æ–≤–Ω–æ —Ç–∞–±–ª–æ —Å overview
- `IntrastatReports` - –°–ø—Ä–∞–≤–∫–∏ –ø–æ —Å—Ç—Ä–∞–Ω–∏, CN –∫–æ–¥–æ–≤–µ, –ø–µ—Ä–∏–æ–¥–∏
- `IntrastatSettings` - –ù–∞—Å—Ç—Ä–æ–π–∫–∏, –∏–º–ø–æ—Ä—Ç –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞, —Å–≤—ä—Ä–∑–≤–∞–Ω–∏—è

## üöÄ –ò–Ω—Å—Ç–∞–ª–∞—Ü–∏—è

### 1. Backend –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```toml
# Cargo.toml
[dependencies]
csv = "1.3"                    # –ó–∞ –∏–º–ø–æ—Ä—Ç –Ω–∞ –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞
quick-xml = { version = "0.36", features = ["serialize"] }
rust_decimal = { version = "1.37", features = ["serde", "db-postgres"] }
```

### 2. –ë–∞–∑–∞ –¥–∞–Ω–Ω–∏ –º–∏–≥—Ä–∞—Ü–∏—è
```bash
# –ò–∑–ø—ä–ª–Ω–µ—Ç–µ SQL —Å–∫—Ä–∏–ø—Ç–∞
psql -d your_database -f migration/intrastat_schema.sql
```

### 3. Frontend –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
–ù—è–º–∞ –¥–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ - –∏–∑–ø–æ–ª–∑–≤–∞ —Å–µ Tailwind CSS.

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### 1. –ê–∫—Ç–∏–≤–∏—Ä–∞–Ω–µ –Ω–∞ –º–æ–¥—É–ª–∞
```javascript
// –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∏—Ç–µ –Ω–∞ –∫–æ–º–ø–∞–Ω–∏—è—Ç–∞
{
  "isEnabled": true,
  "arrivalThresholdBgn": 400000.00,
  "dispatchThresholdBgn": 400000.00,
  "responsiblePersonName": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
  "responsiblePersonPhone": "+359 2 123 4567",
  "responsiblePersonEmail": "ivan@company.bg"
}
```

### 2. –ò–º–ø–æ—Ä—Ç –Ω–∞ –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞
CSV —Ñ–∞–π–ª —Å –∫–æ–ª–æ–Ω–∏:
```csv
CN_–∫–æ–¥,–û–ø–∏—Å–∞–Ω–∏–µ,–ú–µ—Ä–Ω–∞_–µ–¥–∏–Ω–∏—Ü–∞,–û–ø–∏—Å–∞–Ω–∏–µ_–µ–¥–∏–Ω–∏—Ü–∞
84832000,–õ–∞–≥–µ—Ä–∏ —Å —Ç—ä—Ä–∫–∞–ª—è—â–∏ —Å–µ –µ–ª–µ–º–µ–Ω—Ç–∏,p/st,–±—Ä–æ–π–∫–∏
85011000,–ï–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏ –¥–≤–∏–≥–∞—Ç–µ–ª–∏,p/st,–±—Ä–æ–π–∫–∏
```

### 3. –°–≤—ä—Ä–∑–≤–∞–Ω–µ –Ω–∞ —Å–º–µ—Ç–∫–∏
```javascript
// –ü—Ä–∏–º–µ—Ä –∑–∞ —Å–≤—ä—Ä–∑–≤–∞–Ω–µ
{
  "accountId": 304,           // –ú–∞—Ç–µ—Ä–∏–∞–ª–∏
  "nomenclatureId": 123,      // CN –∫–æ–¥ 84832000
  "flowDirection": "ARRIVAL", // –í—Ö–æ–¥—è—â–∏
  "transactionNatureCode": "11", // –ù–µ–∑–∞–±–∞–≤–Ω–∞ –ø—Ä–æ–¥–∞–∂–±–∞
  "isOptional": true         // –û–ø—Ü–∏–æ–Ω–∞–ª–Ω–æ —Å–≤—ä—Ä–∑–≤–∞–Ω–µ
}
```

## üì§ XML –ï–∫—Å–ø–æ—Ä—Ç

### –§–æ—Ä–º–∞—Ç —Å–ø–æ—Ä–µ–¥ –ù–ê–ü (2022)
```xml
<?xml version="1.0" encoding="UTF-8"?>
<INSTAT>
  <Envelope>
    <envelopeId>BG123456789202411</envelopeId>
    <DateTime>2024-11-30T10:30:00</DateTime>
    <Party>
      <partyType>PSI</partyType>
      <partyId>123456789</partyId>
      <partyName>–ú–æ—è—Ç–∞ —Ñ–∏—Ä–º–∞ –û–û–î</partyName>
    </Party>
    <Declaration>
      <declarationId>1_202411</declarationId>
      <referencePeriod>202411</referencePeriod>
      <Function>O+A</Function>
      <declarationTypeCode>19</declarationTypeCode>
      <flowCode>A</flowCode>
      <currencyCode>BGN</currencyCode>
      <totalInvoicedAmount>25000.00</totalInvoicedAmount>
      <totalStatisticalValue>25000.00</totalStatisticalValue>
      <totalItems>15</totalItems>
    </Declaration>
  </Envelope>
  
  <INSTAT_A>
    <ITEM_A>
      <itemNumber>1</itemNumber>
      <CN8>
        <CN8Code>84832000</CN8Code>
      </CN8>
      <MSConsDestCode>DE</MSConsDestCode>
      <countryOfOriginCode>DE</countryOfOriginCode>
      <netMass>15.500</netMass>
      <invoicedAmount>2500.00</invoicedAmount>
      <statisticalValue>2500.00</statisticalValue>
      <NatureOfTransaction>
        <natureOfTransactionACode>1</natureOfTransactionACode>
        <natureOfTransactionBCode>1</natureOfTransactionBCode>
      </NatureOfTransaction>
      <modeOfTransportCode>3</modeOfTransportCode>
      <deliveryTerms>EXW</deliveryTerms>
    </ITEM_A>
  </INSTAT_A>
</INSTAT>
```

## üß™ –¢–µ—Å—Ç–≤–∞–Ω–µ

### 1. –¢–µ—Å—Ç –Ω–∞ –∫–æ–º–ø–∏–ª–∞—Ü–∏—è
```bash
cd backend && cargo build
```

### 2. –¢–µ—Å—Ç –Ω–∞ frontend
```bash
cd frontend && npm run build
```

### 3. –¢–µ—Å—Ç –Ω–∞ API
```bash
# GraphQL playground –Ω–∞ http://localhost:8000/graphql
```

### 4. –¢–µ—Å—Ç –Ω–∞ XML –µ–∫—Å–ø–æ—Ä—Ç
```bash
# –°—ä–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤–∞ –¥–µ–∫–ª–∞—Ä–∞—Ü–∏—è –∏ –µ–∫—Å–ø–æ—Ä—Ç–∏—Ä–∞–π—Ç–µ XML
```

## üîÑ Workflow

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ (–µ–¥–Ω–æ–∫—Ä–∞—Ç–Ω–æ)
- –ê–∫—Ç–∏–≤–∏—Ä–∞–Ω–µ –Ω–∞ –º–æ–¥—É–ª–∞ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏—Ç–µ
- –ò–º–ø–æ—Ä—Ç –Ω–∞ CN –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞ –æ—Ç CSV
- –ó–∞–¥–∞–≤–∞–Ω–µ –Ω–∞ –æ—Ç–≥–æ–≤–æ—Ä–Ω–æ –ª–∏—Ü–µ

### 2. –ú–µ—Å–µ—á–Ω–∞ —Ä–∞–±–æ—Ç–∞
- –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–æ—Å–ª–µ–¥—è–≤–∞ –æ–±–æ—Ä–æ—Ç–∞
- –ü—Ä–∏ –Ω–∞–¥–≤–∏—à–∞–≤–∞–Ω–µ –Ω–∞ –ø—Ä–∞–≥–∞ - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
- –ì–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ –Ω–∞ –¥–µ–∫–ª–∞—Ä–∞—Ü–∏—è –æ—Ç –∂—É—Ä–Ω–∞–ª–Ω–∏—Ç–µ –∑–∞–ø–∏—Å–∏
- –†–µ–¥–∞–∫—Ç–∏—Ä–∞–Ω–µ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –¥–∞–Ω–Ω–∏—Ç–µ
- XML –µ–∫—Å–ø–æ—Ä—Ç –∑–∞ –ø–æ–¥–∞–≤–∞–Ω–µ –≤ –ù–ê–ü

### 3. –û–ø—Ü–∏–æ–Ω–∞–ª–Ω–∏ –¥–µ–π–Ω–æ—Å—Ç–∏
- –°–≤—ä—Ä–∑–≤–∞–Ω–µ –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–∏ —Å–º–µ—Ç–∫–∏ —Å –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞
- –î–µ—Ç–∞–π–ª–Ω–∏ —Å–ø—Ä–∞–≤–∫–∏ –∑–∞ –∞–Ω–∞–ª–∏–∑
- –ï–∫—Å–ø–æ—Ä—Ç –Ω–∞ –¥–∞–Ω–Ω–∏ –∑–∞ –∞—Ä—Ö–∏–≤–∏—Ä–∞–Ω–µ

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### Key Performance Indicators (KPIs)
- –û–±—â –æ–±–æ—Ä–æ—Ç –ø–æ –º–µ—Å–µ—Ü–∏ (–≤—Ö–æ–¥—è—â–∏/–∏–∑—Ö–æ–¥—è—â–∏)
- –ü—Ä–æ—Ü–µ–Ω—Ç –Ω–∞–¥–≤–∏—à–∞–≤–∞–Ω–µ –Ω–∞ –ø—Ä–∞–≥–æ–≤–µ
- –ë—Ä–æ–π –ø–æ–¥–∞–¥–µ–Ω–∏ –¥–µ–∫–ª–∞—Ä–∞—Ü–∏–∏
- –ù–∞–π-—á–µ—Å—Ç–æ –∏–∑–ø–æ–ª–∑–≤–∞–Ω–∏ CN –∫–æ–¥–æ–≤–µ
- –¢–æ–ø —Ç—ä—Ä–≥–æ–≤—Å–∫–∏ –ø–∞—Ä—Ç–Ω—å–æ—Ä–∏ –ø–æ —Å—Ç—Ä–∞–Ω–∏

### –°–ø—Ä–∞–≤–∫–∏
- –ú–µ—Å–µ—á–Ω–∏ –æ–±–æ—Ä–æ—Ç–∏ –ø–æ —Å—Ç—Ä–∞–Ω–∏
- –î–µ—Ç–∞–π–ª–∏ –ø–æ CN –∫–æ–¥–æ–≤–µ
- –ê–Ω–∞–ª–∏–∑ –Ω–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–∏—Ç–µ —Ä–µ–∂–∏–º–∏
- –ò—Å—Ç–æ—Ä–∏—è –Ω–∞ –ø–æ–¥–∞–≤–∞–Ω–∏—è—Ç–∞

## üö® –ò–∑–≤–µ—Å—Ç–Ω–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å–≤—ä—Ä–∑–≤–∞–Ω–µ** - –Ω–µ –ø–æ–∫—Ä–∏–≤–∞ 100% –æ—Ç —Å–ª—É—á–∞–∏—Ç–µ
2. **–í–∞–ª–∏–¥–∞—Ü–∏—è** - –æ—Å–Ω–æ–≤–Ω–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏, –Ω–µ –∑–∞–º–µ–Ω—è —á–æ–≤–µ—à–∫–∏—è –ø—Ä–µ–≥–ª–µ–¥
3. **–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏ –¥–∞–Ω–Ω–∏** - –º–∏–≥—Ä–∞—Ü–∏—è –æ—Ç —Å—Ç–∞—Ä–∏ —Å–∏—Å—Ç–µ–º–∏ –Ω–µ –µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞
4. **–ú–Ω–æ–≥–æ–≤–∞–ª—É—Ç–Ω–æ—Å—Ç** - —Ä–∞–±–æ—Ç–∏ –æ—Å–Ω–æ–≤–Ω–æ —Å BGN

## üîÆ –ü–ª–∞–Ω–∏—Ä–∞–Ω–∏ –ø–æ–¥–æ–±—Ä–µ–Ω–∏—è

- [ ] AI-–±–∞–∑–∏—Ä–∞–Ω–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ CN –∫–æ–¥–æ–≤–µ
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Ä–∞–∑–ø–æ–∑–Ω–∞–≤–∞–Ω–µ –Ω–∞ —Å—Ç–æ–∫–∏—Ç–µ –æ—Ç –æ–ø–∏—Å–∞–Ω–∏–µ—Ç–æ
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–∏—Ç–Ω–∏—á–µ—Å–∫–∏—Ç–µ –¥–µ–∫–ª–∞—Ä–∞—Ü–∏–∏
- [ ] Mobile app –∑–∞ –±—ä—Ä–∑–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å—Ç–∞—Ç—É—Å
- [ ] Advanced –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ —Å –≥—Ä–∞—Ñ–∏–∫–∏ –∏ dashboard

## üìû –ü–æ–¥–¥—Ä—ä–∂–∫–∞

–ó–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞ –ø–æ–¥–¥—Ä—ä–∂–∫–∞ –∏–ª–∏ –≤—ä–ø—Ä–æ—Å–∏ –æ—Ç–Ω–æ—Å–Ω–æ INTRASTAT –º–æ–¥—É–ª–∞:
- üìß Email: support@rs-ac-bg.com
- üì± –¢–µ–ª–µ—Ñ–æ–Ω: +359 2 XXX XXXX
- üí¨ –í—ä—Ç—Ä–µ—à–µ–Ω —á–∞—Ç: #intrastat-support

---

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å—ä–∑–¥–∞–¥–µ–Ω–∞ –Ω–∞:** 11.09.2025  
**–í–µ—Ä—Å–∏—è:** 1.0.0  
**–ê–≤—Ç–æ—Ä:** Claude Code Assistant  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤ –∑–∞ –ø—Ä–æ–¥—É–∫—Ü–∏—è