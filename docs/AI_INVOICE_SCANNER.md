# AI –°–∫–µ–Ω–µ—Ä –Ω–∞ –§–∞–∫—Ç—É—Ä–∏ ‚Üí –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –î–î–° –û–ø–µ—Ä–∞—Ü–∏–∏

## üéØ –û–±–∑–æ—Ä

–†–µ–≤–æ–ª—é—Ü–∏–æ–Ω–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–Ω–æ—Å—Ç –∫–æ—è—Ç–æ –∏–∑–ø–æ–ª–∑–≤–∞ Mistral AI Vision –∑–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Ä–∞–∑–ø–æ–∑–Ω–∞–≤–∞–Ω–µ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ —Ñ–∞–∫—Ç—É—Ä–∏, —Å –¥–∏—Ä–µ–∫—Ç–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫—ä–º –î–î–° –º–æ–¥—É–ª–∞. –°–∏—Å—Ç–µ–º–∞—Ç–∞ –∏–∑–≤–ª–∏—á–∞ –¥–∞–Ω–Ω–∏ –æ—Ç —Å–Ω–∏–º–∫–∏/PDF —Ñ–∞–π–ª–æ–≤–µ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—ä–∑–¥–∞–≤–∞ —Å—á–µ—Ç–æ–≤–æ–¥–Ω–∏ –∑–∞–ø–∏—Å–∏ —Å –ø—Ä–∞–≤–∏–ª–Ω–∏—Ç–µ –î–î–° –∫–æ–¥–æ–≤–µ.

## ‚ú® –í—ä–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ò–∑–≤–ª–∏—á–∞–Ω–µ –Ω–∞ –î–∞–Ω–Ω–∏
- üìÑ **PDF –∏ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è**: –ü–æ–¥–¥—Ä—ä–∂–∫–∞ –Ω–∞ PNG, JPG, JPEG, PDF —Ñ–æ—Ä–º–∞—Ç–∏
- ü§ñ **Mistral AI Vision**: –ò–Ω—Ç–µ–ª–∏–≥–µ–Ω—Ç–Ω–æ —Ä–∞–∑–ø–æ–∑–Ω–∞–≤–∞–Ω–µ –Ω–∞ —Ç–µ–∫—Å—Ç –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- üîç **–ò–∑–≤–ª–∏—á–∞–Ω–µ –Ω–∞ –¥–∞–Ω–Ω–∏**:
  - –¢–∏–ø –∏ –Ω–æ–º–µ—Ä –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç
  - –î–∞—Ç–∞ –Ω–∞ –∏–∑–¥–∞–≤–∞–Ω–µ –∏ –ø–∞–¥–µ–∂
  - –ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç (–∏–º–µ, –ï–ò–ö, –î–î–° –Ω–æ–º–µ—Ä, –∞–¥—Ä–µ—Å)
  - –°—É–º–∏ (–æ—Å–Ω–æ–≤–∞, –î–î–°, –æ–±—â–∞ —Å—É–º–∞)
  - –í–∞–ª—É—Ç–∞
  - –ê—Ä—Ç–∏–∫—É–ª–∏ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏ —Ü–µ–Ω–∏

### VIES –í–∞–ª–∏–¥–∞—Ü–∏—è
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞**: –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –î–î–° –Ω–æ–º–µ—Ä–∞ —á—Ä–µ–∑ EU VIES
- üåç **–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–∏ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∏**: –ü–æ–¥–¥—Ä—ä–∂–∫–∞ –Ω–∞ –≤—Å–∏—á–∫–∏ EU –¥—ä—Ä–∂–∞–≤–∏
- üíæ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—ä–∑–¥–∞–≤–∞–Ω–µ**: –ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—ä—Ç —Å–µ –¥–æ–±–∞–≤—è –≤ –±–∞–∑–∞—Ç–∞ –∞–∫–æ –ª–∏–ø—Å–≤–∞

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –î–î–° –û–ø–µ—Ä–∞—Ü–∏–∏
- üíº **–ï–¥–∏–Ω –∫–ª–∏–∫**: –ë—É—Ç–æ–Ω "–°—ä–∑–¥–∞–π –î–î–° –æ–ø–µ—Ä–∞—Ü–∏—è" —Å–ª–µ–¥ –≤—Å—è–∫–æ —Å–∫–∞–Ω–∏—Ä–∞–Ω–µ
- üìä **–ü—Ä–∞–≤–∏–ª–Ω–æ —Å—á–µ—Ç–æ–≤–æ–¥—Å—Ç–≤–æ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ –Ω–∞ –¥–µ–±–∏—Ç/–∫—Ä–µ–¥–∏—Ç —Ä–µ–¥–æ–≤–µ
- üìã **–î–î–° –∫–æ–¥–æ–≤–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–Ω–µ —Å–ø–æ—Ä–µ–¥ –ü–ü–ó–î–°
- ‚ö° **–ë—ä—Ä–∑–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞**: –û—Ç —Ñ–∞–∫—Ç—É—Ä–∞ –¥–æ –∑–∞–ø–∏—Å –∑–∞ —Å–µ–∫—É–Ω–¥–∏

## üöÄ –ö–∞–∫ –¥–∞ –ò–∑–ø–æ–ª–∑–≤–∞–º

### –°—Ç—ä–ø–∫–∞ 1: –ö–∞—á–≤–∞–Ω–µ –Ω–∞ –§–∞–∫—Ç—É—Ä–∞

1. –û—Ç–∏–¥–µ—Ç–µ –Ω–∞ **Imports ‚Üí AI –°–∫–∞–Ω–∏—Ä–∞–Ω–µ –Ω–∞ —Ñ–∞–∫—Ç—É—Ä–∏** (`/imports`)
2. –ö–∞—á–µ—Ç–µ —Ñ–∞–∫—Ç—É—Ä–∞ —á—Ä–µ–∑:
   - Drag & drop –≤ –∑–æ–Ω–∞—Ç–∞ –∑–∞ –∫–∞—á–≤–∞–Ω–µ
   - –ë—É—Ç–æ–Ω "–ò–∑–±–µ—Ä–µ—Ç–µ —Ñ–∞–π–ª–æ–≤–µ"
3. –ü–æ–¥–¥—ä—Ä–∂–∞–Ω–∏ —Ñ–æ—Ä–º–∞—Ç–∏: `.png`, `.jpg`, `.jpeg`, `.pdf`
4. –ú–∞–∫—Å–∏–º–∞–ª–µ–Ω —Ä–∞–∑–º–µ—Ä: 10MB –Ω–∞ —Ñ–∞–π–ª
5. –ú–æ–∂–µ –¥–∞ –∫–∞—á–∏—Ç–µ –¥–æ 10 —Ñ–∞–π–ª–∞ –Ω–∞–≤–µ–¥–Ω—ä–∂

### –°—Ç—ä–ø–∫–∞ 2: AI –û–±—Ä–∞–±–æ—Ç–∫–∞

1. –ù–∞—Ç–∏—Å–Ω–µ—Ç–µ **"–ó–∞–ø–æ—á–Ω–∏ AI –°–∫–∞–Ω–∏—Ä–∞–Ω–µ"** ü§ñ
2. AI –∏–∑–≤–ª–∏—á–∞ –¥–∞–Ω–Ω–∏—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ:
   - –ê–Ω–∞–ª–∏–∑–∏—Ä–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ç–∞ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
   - –†–∞–∑–ø–æ–∑–Ω–∞–≤–∞ —Ç–µ–∫—Å—Ç –∏ —á–∏—Å–ª–∞
   - –í–∞–ª–∏–¥–∏—Ä–∞ –î–î–° –Ω–æ–º–µ—Ä–∞ —á—Ä–µ–∑ VIES
   - –ü—Ä–æ–≤–µ—Ä—è–≤–∞ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞ –≤ –±–∞–∑–∞—Ç–∞
3. –†–µ–∑—É–ª—Ç–∞—Ç—ä—Ç —Å–µ –ø–æ–∫–∞–∑–≤–∞ –≤–µ–¥–Ω–∞–≥–∞:
   - ‚úÖ –ó–µ–ª–µ–Ω —Å—Ç–∞—Ç—É—Å: –£—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–µ–Ω–∞
   - ‚ö†Ô∏è –ñ—ä–ª—Ç —Å—Ç–∞—Ç—É—Å: –ò–∑–∏—Å–∫–≤–∞ —Ä—ä—á–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞
   - ‚ùå –ß–µ—Ä–≤–µ–Ω —Å—Ç–∞—Ç—É—Å: –ì—Ä–µ—à–∫–∞

### –°—Ç—ä–ø–∫–∞ 3: –°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –î–î–° –û–ø–µ—Ä–∞—Ü–∏—è

1. –ü—Ä–µ–≥–ª–µ–¥–∞–π—Ç–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏—Ç–µ –¥–∞–Ω–Ω–∏
2. –ü—Ä–∏ –Ω—É–∂–¥–∞ –ø—Ä–æ–≤–µ—Ä–µ—Ç–µ:
   - –ù–æ–º–µ—Ä –∏ –¥–∞—Ç–∞ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç
   - –ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç –∏ –î–î–° –Ω–æ–º–µ—Ä
   - –°—É–º–∏ (–æ—Å–Ω–æ–≤–∞, –î–î–°, –æ–±—â–∞)
3. –ù–∞—Ç–∏—Å–Ω–µ—Ç–µ **"–°—ä–∑–¥–∞–π –î–î–° –æ–ø–µ—Ä–∞—Ü–∏—è"** üíº
4. –°–∏—Å—Ç–µ–º–∞—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ:
   - –û–ø—Ä–µ–¥–µ–ª—è —Ç–∏–ø –Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏—è—Ç–∞ (–ø–æ–∫—É–ø–∫–∞/–ø—Ä–æ–¥–∞–∂–±–∞)
   - –ò–∑–±–∏—Ä–∞ –ø—Ä–∞–≤–∏–ª–Ω–∏—Ç–µ –î–î–° –∫–æ–¥–æ–≤–µ
   - –ì–µ–Ω–µ—Ä–∏—Ä–∞ accounting lines
   - –ó–∞–ø–∏—Å–≤–∞ –≤ `journal_entries`
5. ‚úÖ –ü–æ–ª—É—á–∞–≤–∞—Ç–µ –ø–æ—Ç–≤—ä—Ä–∂–¥–µ–Ω–∏–µ: "–î–î–° –æ–ø–µ—Ä–∞—Ü–∏—è —Å—ä–∑–¥–∞–¥–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ"

## üìä –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ú–∞–ø–∏—Ä–∞–Ω–µ

### –ü–æ–∫—É–ø–∫–∞ (PURCHASE)
```
AI ParsedInvoice         ‚Üí    Journal Entry
‚îú‚îÄ‚îÄ documentNumber      ‚Üí    document_number
‚îú‚îÄ‚îÄ documentDate        ‚Üí    document_date + vat_date + accounting_date
‚îú‚îÄ‚îÄ transactionType     ‚Üí    "PURCHASE"
‚îú‚îÄ‚îÄ netAmount          ‚Üí    –î—Ç 602 (–†–∞–∑—Ö–æ–¥–∏)
‚îú‚îÄ‚îÄ vatAmount          ‚Üí    –î—Ç 4531 (–î–î–°)
‚îú‚îÄ‚îÄ totalAmount        ‚Üí    –ö—Ç 401 (–î–æ—Å—Ç–∞–≤—á–∏—Ü–∏)
‚îî‚îÄ‚îÄ counterpart        ‚Üí    counterpart_id

–î–î–° –∫–æ–¥–æ–≤–µ:
‚îú‚îÄ‚îÄ vat_document_type: "03" (–§–∞–∫—Ç—É—Ä–∞ –∑–∞ –ø–æ–∫—É–ø–∫–∞)
‚îî‚îÄ‚îÄ vat_purchase_operation: "–ø–æ–∫10" (–ü—ä–ª–µ–Ω –¥–∞–Ω—ä—á–µ–Ω –∫—Ä–µ–¥–∏—Ç)
```

### –ü—Ä–æ–¥–∞–∂–±–∞ (SALE)
```
AI ParsedInvoice         ‚Üí    Journal Entry
‚îú‚îÄ‚îÄ documentNumber      ‚Üí    document_number
‚îú‚îÄ‚îÄ documentDate        ‚Üí    document_date + vat_date + accounting_date
‚îú‚îÄ‚îÄ transactionType     ‚Üí    "SALE"
‚îú‚îÄ‚îÄ totalAmount        ‚Üí    –î—Ç 411 (–ö–ª–∏–µ–Ω—Ç–∏)
‚îú‚îÄ‚îÄ netAmount          ‚Üí    –ö—Ç 701 (–ü—Ä–∏—Ö–æ–¥–∏)
‚îú‚îÄ‚îÄ vatAmount          ‚Üí    –ö—Ç 4531 (–î–î–°)
‚îî‚îÄ‚îÄ counterpart        ‚Üí    counterpart_id

–î–î–° –∫–æ–¥–æ–≤–µ:
‚îú‚îÄ‚îÄ vat_document_type: "01" (–§–∞–∫—Ç—É—Ä–∞)
‚îî‚îÄ‚îÄ vat_sales_operation: "–ø—Ä–æ11" (20%), "–ø—Ä–æ17" (9%), "–ø—Ä–æ19" (0%)
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –û–ø—Ä–µ–¥–µ–ª—è–Ω–µ –Ω–∞ –î–î–° –û–ø–µ—Ä–∞—Ü–∏–∏

**–ó–∞ –ü—Ä–æ–¥–∞–∂–±–∏** (—Å–ø–æ—Ä–µ–¥ –î–î–° —Å—Ç–∞–≤–∫–∞):
- 19-21% ‚Üí `–ø—Ä–æ11` (–î–æ—Å—Ç–∞–≤–∫–∞ —Å 20% –î–î–°)
- 8-10%  ‚Üí `–ø—Ä–æ17` (–î–æ—Å—Ç–∞–≤–∫–∞ —Å 9% –î–î–°)
- 0%     ‚Üí `–ø—Ä–æ19` (–î–æ—Å—Ç–∞–≤–∫–∞ —Å 0% –î–î–°)
- default ‚Üí `–ø—Ä–æ11`

**–ó–∞ –ü–æ–∫—É–ø–∫–∏**:
- default ‚Üí `–ø–æ–∫10` (–ü–æ–∫—É–ø–∫–∞ —Å –ø—ä–ª–µ–Ω –¥–∞–Ω—ä—á–µ–Ω –∫—Ä–µ–¥–∏—Ç)

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –î–µ—Ç–∞–π–ª–∏

### GraphQL API

#### Mutation: `createVatJournalFromAi`

**Input:**
```graphql
input CreateVatJournalFromAIInput {
  companyId: Int
  counterpartId: Int
  transactionType: String  # "PURCHASE" –∏–ª–∏ "SALE"
  documentNumber: String
  documentDate: Date
  vatDate: Date
  accountingDate: Date
  description: String
  currency: String
  netAmount: Decimal
  vatAmount: Decimal
  totalAmount: Decimal
}
```

**Output:**
```graphql
type VatJournalCreationPayload {
  success: Boolean!
  journalEntryId: Int!
  entryNumber: String!
  message: String
}
```

**–ü—Ä–∏–º–µ—Ä:**
```graphql
mutation {
  createVatJournalFromAi(input: {
    companyId: 1
    counterpartId: 42
    transactionType: "PURCHASE"
    documentNumber: "INV-2024-001"
    documentDate: "2024-10-17"
    vatDate: "2024-10-17"
    accountingDate: "2024-10-17"
    description: "Acme Corp - INV-2024-001"
    currency: "BGN"
    netAmount: 100.00
    vatAmount: 20.00
    totalAmount: 120.00
  }) {
    success
    journalEntryId
    entryNumber
    message
  }
}
```

### Backend –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

**–§–∞–π–ª:** `backend/src/graphql/invoice_resolver.rs`

1. **–í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –≤—Ö–æ–¥–Ω–∏ –¥–∞–Ω–Ω–∏**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞ –∑–∞–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–∏ –ø–æ–ª–µ—Ç–∞
   - –í–∞–ª–∏–¥–∏—Ä–∞–Ω–µ –Ω–∞ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç

2. **–û–ø—Ä–µ–¥–µ–ª—è–Ω–µ –Ω–∞ –î–î–° –ø–∞—Ä–∞–º–µ—Ç—Ä–∏**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–Ω–µ –Ω–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (INPUT/OUTPUT)
   - –ò–∑–±–æ—Ä –Ω–∞ document_type (01, 03, –∏ –¥—Ä.)
   - –ò–∑—á–∏—Å–ª—è–≤–∞–Ω–µ –Ω–∞ –î–î–° —Å—Ç–∞–≤–∫–∞
   - –û–ø—Ä–µ–¥–µ–ª—è–Ω–µ –Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∏ –∫–æ–¥–æ–≤–µ

3. **–ù–∞–º–∏—Ä–∞–Ω–µ –Ω–∞ —Å—á–µ—Ç–æ–≤–æ–¥–Ω–∏ —Å–º–µ—Ç–∫–∏**
   - Query –∑–∞ –∞–∫—Ç–∏–≤–Ω–∏ —Å–º–µ—Ç–∫–∏ –Ω–∞ –∫–æ–º–ø–∞–Ω–∏—è—Ç–∞
   - –¢—ä—Ä—Å–µ–Ω–µ –ø–æ –∫–æ–¥ prefix (602, 401, 4531, 701, 411)

4. **–ì–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ –Ω–∞ accounting lines**
   - –ü–æ–∫—É–ø–∫–∞: 3 —Ä–µ–¥–∞ (–î—Ç 602, –î—Ç 4531, –ö—Ç 401)
   - –ü—Ä–æ–¥–∞–∂–±–∞: 3 —Ä–µ–¥–∞ (–î—Ç 411, –ö—Ç 701, –ö—Ç 4531)

5. **–°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ journal entry**
   - –ó–∞–ø–∏—Å –≤ `journal_entries`
   - –°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ `entry_lines`
   - –í—Ä—ä—â–∞–Ω–µ –Ω–∞ —Ä–µ–∑—É–ª—Ç–∞—Ç

### Frontend –ö–æ–º–ø–æ–Ω–µ–Ω—Ç

**–§–∞–π–ª:** `frontend/src/components/imports/AIInvoiceScanner.jsx`

**–ö–ª—é—á–æ–≤–∏ —Ñ—É–Ω–∫—Ü–∏–∏:**

```javascript
// AI –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ —Ñ–∞–∫—Ç—É—Ä–∞
const startAIScanning = async () => {
  // 1. –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞ —Ñ–∞–π–ª–∞ –≤ base64
  // 2. –ò–∑–ø—Ä–∞—â–∞ –∫—ä–º processInvoice mutation
  // 3. –ü–æ–ª—É—á–∞–≤–∞ ParsedInvoice + ValidatedContragent
  // 4. –ü–æ–∫–∞–∑–≤–∞ —Ä–µ–∑—É–ª—Ç–∞—Ç–∞
}

// –°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –î–î–° –æ–ø–µ—Ä–∞—Ü–∏—è
const createVatJournalEntry = async (fileIndex) => {
  // 1. –í–∞–ª–∏–¥–∏—Ä–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—Ç–µ –¥–∞–Ω–Ω–∏
  // 2. –ü–æ–¥–≥–æ—Ç–≤—è input –∑–∞ createVatJournalFromAi
  // 3. –ò–∑–ø—Ä–∞—â–∞ mutation
  // 4. –ü–æ–∫–∞–∑–≤–∞ success/error
}
```

## üé® UI/UX

### –°—Ç–∞—Ç—É—Å–∏ –Ω–∞ –û–±—Ä–∞–±–æ—Ç–∫–∞
- üü° **Pending** (–ß–∞–∫–∞): –§–∞–π–ª—ä—Ç –µ –∫–∞—á–µ–Ω, –æ—á–∞–∫–≤–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞
- üîµ **Processing** (–°–∫–∞–Ω–∏—Ä–∞...): AI –æ–±—Ä–∞–±–æ—Ç–≤–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
- üü¢ **Completed** (–ì–æ—Ç–æ–≤–æ): –£—Å–ø–µ—à–Ω–æ –∏–∑–≤–ª–µ—á–µ–Ω–∏ –¥–∞–Ω–Ω–∏
- üî¥ **Error** (–ì—Ä–µ—à–∫–∞): –ü—Ä–æ–±–ª–µ–º –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞

### Visual Feedback
- ‚è≥ **Loading spinner**: –ü–æ –≤—Ä–µ–º–µ –Ω–∞ AI –æ–±—Ä–∞–±–æ—Ç–∫–∞
- ‚úÖ **Success message**: "–î–î–° –æ–ø–µ—Ä–∞—Ü–∏—è —Å—ä–∑–¥–∞–¥–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ"
- ‚ö†Ô∏è **Warning badge**: "–ò–∑–∏—Å–∫–≤–∞ —Ä—ä—á–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞"
- üíº **Action button**: "–°—ä–∑–¥–∞–π –î–î–° –æ–ø–µ—Ä–∞—Ü–∏—è"

### –ò–∑–≤–ª–µ—á–µ–Ω–∏ –î–∞–Ω–Ω–∏
–°–ª–µ–¥ —É—Å–ø–µ—à–Ω–æ —Å–∫–∞–Ω–∏—Ä–∞–Ω–µ —Å–µ –ø–æ–∫–∞–∑–≤–∞:
- üìã –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∑–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (—Ç–∏–ø, –Ω–æ–º–µ—Ä, –¥–∞—Ç–∞, —Å—É–º–∞)
- üë§ –î–∞–Ω–Ω–∏ –∑–∞ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞ (–∏–º–µ, –ï–ò–ö, –î–î–° –Ω–æ–º–µ—Ä, –∞–¥—Ä–µ—Å)
- ‚úì VIES –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å
- üóÇÔ∏è –°–ø–∏—Å—ä–∫ —Å –∞—Ä—Ç–∏–∫—É–ª–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª–Ω–æ)

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### Environment Variables
```bash
# Mistral AI API –∫–ª—é—á (–∑–∞–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–æ)
MISTRAL_API_KEY=your_api_key_here
```

### Supported File Types
- **Images**: PNG, JPG, JPEG
- **Documents**: PDF
- **Max size**: 10MB per file
- **Max files**: 10 simultaneous uploads

## üîí –°–∏–≥—É—Ä–Ω–æ—Å—Ç

### Data Privacy
- AI –æ–±—Ä–∞–±–æ—Ç–∫–∞—Ç–∞ —Å–µ –∏–∑–≤—ä—Ä—à–≤–∞ –ø—Ä–µ–∑ Mistral API
- –§–∞–π–ª–æ–≤–µ—Ç–µ –ù–ï —Å–µ –∑–∞–ø–∞–∑–≤–∞—Ç –Ω–∞ —Å—ä—Ä–≤—ä—Ä–∞
- Base64 encoding –∑–∞ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç
- HTTPS –∑–∞ –≤—Å–∏—á–∫–∏ –∫–æ–º—É–Ω–∏–∫–∞—Ü–∏–∏

### VIES Integration
- –†–µ–∞–ª–Ω–æ –≤—Ä–µ–º–µ –≤–∞–ª–∏–¥–∞—Ü–∏—è
- EU –æ—Ñ–∏—Ü–∏–∞–ª–µ–Ω —Å—ä—Ä–≤–∏—Å
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ VAT status
- –ö–µ—à–∏—Ä–∞–Ω–µ –∑–∞ performance

## üìà Best Practices

### 1. –ö–∞—á–µ—Å—Ç–≤–æ –Ω–∞ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è—Ç–∞
- ‚úÖ –ò–∑–ø–æ–ª–∑–≤–∞–π—Ç–µ –≤–∏—Å–æ–∫–æ –∫–∞—á–µ—Å—Ç–≤–æ —Å–∫–µ–Ω–æ–≤–µ/—Å–Ω–∏–º–∫–∏
- ‚úÖ –£–≤–µ—Ä–µ—Ç–µ —Å–µ, —á–µ —Ç–µ–∫—Å—Ç—ä—Ç –µ —á–µ—Ç–ª–∏–≤
- ‚úÖ –ò–∑–±—è–≥–≤–∞–π—Ç–µ —Ä–∞–∑–º–∏—Ç–∏ –∏–ª–∏ –∏–∑–∫—Ä–∏–≤–µ–Ω–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- ‚úÖ PDF —Ñ–æ—Ä–º–∞—Ç –µ –Ω–∞–π-–Ω–∞–¥–µ–∂–¥–µ–Ω

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –î–∞–Ω–Ω–∏
- ‚ö†Ô∏è –í–∏–Ω–∞–≥–∏ –ø—Ä–µ–≥–ª–µ–¥–∞–π—Ç–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏—Ç–µ –¥–∞–Ω–Ω–∏
- ‚ö†Ô∏è –ü—Ä–∏ warning "–ò–∑–∏—Å–∫–≤–∞ —Ä—ä—á–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞" - –ø—Ä–æ–≤–µ—Ä–µ—Ç–µ –≤–Ω–∏–º–∞—Ç–µ–ª–Ω–æ
- ‚ö†Ô∏è –í–∞–ª–∏–¥–∏—Ä–∞–π—Ç–µ –î–î–° –Ω–æ–º–µ—Ä–∞ –ø—Ä–µ–¥–∏ –∑–∞–ø–∏—Å
- ‚ö†Ô∏è –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ —Å—É–º–∏—Ç–µ –∑–∞ —Ç–æ—á–Ω–æ—Å—Ç

### 3. Workflow –ü—Ä–µ–ø–æ—Ä—ä–∫–∏
1. –û–±—Ä–∞–±–æ—Ç–µ—Ç–µ —Ñ–∞–∫—Ç—É—Ä–∏—Ç–µ –ø–∞—Ä—Ç–∏–¥–Ω–æ (–¥–æ 10 –Ω–∞–≤–µ–¥–Ω—ä–∂)
2. –ü—ä—Ä–≤–æ –ø—Ä–æ–≤–µ—Ä–µ—Ç–µ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏—Ç–µ –æ—Ç –≤—Å–∏—á–∫–∏
3. –°–ª–µ–¥ —Ç–æ–≤–∞ —Å—ä–∑–¥–∞–≤–∞–π—Ç–µ –î–î–° –æ–ø–µ—Ä–∞—Ü–∏–∏—Ç–µ
4. –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –≤ `/accounting/vat-entry` –∑–∞ –ø–æ—Ç–≤—ä—Ä–∂–¥–µ–Ω–∏–µ

## üêõ Troubleshooting

### –ü—Ä–æ–±–ª–µ–º: AI –Ω–µ —Ä–∞–∑–ø–æ–∑–Ω–∞–≤–∞ —Ç–µ–∫—Å—Ç–∞
**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –∫–∞—á–µ—Å—Ç–≤–æ—Ç–æ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ—Ç–æ
- –û–ø–∏—Ç–∞–π—Ç–µ —Å PDF —Ñ–æ—Ä–º–∞—Ç
- –£–≤–µ—Ä–µ—Ç–µ —Å–µ, —á–µ —Ç–µ–∫—Å—Ç—ä—Ç –µ –Ω–∞ –∫–∏—Ä–∏–ª–∏—Ü–∞/–ª–∞—Ç–∏–Ω–∏—Ü–∞

### –ü—Ä–æ–±–ª–µ–º: VIES –≤–∞–ª–∏–¥–∞—Ü–∏—è—Ç–∞ failed
**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –¥–∞–ª–∏ –î–î–° –Ω–æ–º–µ—Ä—ä—Ç –µ –ø—Ä–∞–≤–∏–ª–µ–Ω
- VIES –º–æ–∂–µ –¥–∞ –Ω–µ —Ä–∞–±–æ—Ç–∏ - –æ–ø–∏—Ç–∞–π—Ç–µ –ø–æ-–∫—ä—Å–Ω–æ
- –†—ä—á–Ω–æ —Å—ä–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞ –∞–∫–æ –µ –Ω—É–∂–Ω–æ

### –ü—Ä–æ–±–ª–µ–º: –ì—Ä–µ—à–∫–∞ –ø—Ä–∏ —Å—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –î–î–° –æ–ø–µ—Ä–∞—Ü–∏—è
**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –¥–∞–ª–∏ –≤—Å–∏—á–∫–∏ –ø–æ–ª–µ—Ç–∞ —Å–∞ –ø–æ–ø—ä–ª–Ω–µ–Ω–∏
- –£–≤–µ—Ä–µ—Ç–µ —Å–µ, —á–µ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—ä—Ç —Å—ä—â–µ—Å—Ç–≤—É–≤–∞
- –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –¥–∞–ª–∏ –∏–º–∞ –∞–∫—Ç–∏–≤–Ω–∏ —Å—á–µ—Ç–æ–≤–æ–¥–Ω–∏ —Å–º–µ—Ç–∫–∏ (602, 401, 4531, –∏ —Ç.–Ω.)

### –ü—Ä–æ–±–ª–µ–º: –õ–∏–ø—Å–≤–∞—â–∏ —Å—á–µ—Ç–æ–≤–æ–¥–Ω–∏ —Å–º–µ—Ç–∫–∏
**–ì—Ä–µ—à–∫–∞:** "Account 602 not found"
**–†–µ—à–µ–Ω–∏–µ:**
- –ò–º–ø–æ—Ä—Ç–∏—Ä–∞–π—Ç–µ —Å–º–µ—Ç–∫–æ–ø–ª–∞–Ω–∞ –∑–∞ –∫–æ–º–ø–∞–Ω–∏—è—Ç–∞
- –°—ä–∑–¥–∞–π—Ç–µ –ª–∏–ø—Å–≤–∞—â–∏—Ç–µ —Å–º–µ—Ç–∫–∏ —Ä—ä—á–Ω–æ
- –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –¥–∞–ª–∏ —Å–º–µ—Ç–∫–∏—Ç–µ —Å–∞ –∞–∫—Ç–∏–≤–Ω–∏

## üìã TODO / Roadmap

### Planned Features
- [ ] Batch –æ–ø–µ—Ä–∞—Ü–∏–∏: "–°—ä–∑–¥–∞–π –î–î–° –∑–∞ –≤—Å–∏—á–∫–∏" –±—É—Ç–æ–Ω
- [ ] Preview modal –ø—Ä–µ–¥–∏ –∑–∞–ø–∏—Å
- [ ] –†–µ–¥–∞–∫—Ü–∏—è –Ω–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏ –¥–∞–Ω–Ω–∏
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ –∞—Ä—Ç–∏–∫—É–ª–∏ –∫–∞—Ç–æ –æ—Ç–¥–µ–ª–Ω–∏ —Ä–µ–¥–æ–≤–µ
- [ ] –ò—Å—Ç–æ—Ä–∏—è/Audit trail –Ω–∞ AI –æ–ø–µ—Ä–∞—Ü–∏–∏—Ç–µ
- [ ] Export –Ω–∞ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏ (Excel/CSV)
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞ account mapping
- [ ] Multi-page PDF support
- [ ] OCR fallback –∞–∫–æ AI –Ω–µ —Ä–∞–±–æ—Ç–∏

### Known Limitations
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—Ç–æ –æ–ø—Ä–µ–¥–µ–ª—è–Ω–µ –Ω–∞ —Å–º–µ—Ç–∫–∏ –µ —Ö–∞—Ä–¥–∫–æ–¥–∏—Ä–∞–Ω–æ (602, 401, –∏ —Ç.–Ω.)
- –ù–µ –ø–æ–¥–¥—ä—Ä–∂–∞ —Å–ª–æ–∂–Ω–∏ –î–î–° —Å—Ö–µ–º–∏ (—Å–º–µ—Å–µ–Ω–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏)
- –ê—Ä—Ç–∏–∫—É–ª–∏—Ç–µ —Å–µ –∏–∑–≤–ª–∏—á–∞—Ç –Ω–æ –Ω–µ —Å–µ –∑–∞–ø–∏—Å–≤–∞—Ç –∫–∞—Ç–æ –æ—Ç–¥–µ–ª–Ω–∏ —Ä–µ–¥–æ–≤–µ
- –ù—è–º–∞ undo —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–Ω–æ—Å—Ç

## üîó –°–≤—ä—Ä–∑–∞–Ω–∏ –î–æ–∫—É–º–µ–Ω—Ç–∏

- [IMPORTS.md](IMPORTS.md) - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∑–∞ Import Center
- [VAT-MODULE.md](VAT-MODULE.md) - –î–î–° –ú–æ–¥—É–ª 2.0
- [VAT-QUICK-REFERENCE.md](VAT-QUICK-REFERENCE.md) - –î–î–° –ö–æ–¥–æ–≤–µ
- [API.md](API.md) - GraphQL API Reference
- [ARCHITECTURE.md](ARCHITECTURE.md) - –°–∏—Å—Ç–µ–º–Ω–∞ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

AI –°–∫–µ–Ω–µ—Ä—ä—Ç –Ω–∞ –§–∞–∫—Ç—É—Ä–∏ –µ **–≥–æ–ª—è–º–æ –ø–æ—Å—Ç–∏–∂–µ–Ω–∏–µ** –∫–æ–µ—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª–Ω–æ —É—Å–∫–æ—Ä—è–≤–∞ –ø—Ä–æ—Ü–µ—Å–∞ –Ω–∞ –≤—ä–≤–µ–∂–¥–∞–Ω–µ –Ω–∞ –î–î–° –æ–ø–µ—Ä–∞—Ü–∏–∏. –û—Ç –∫–∞—á–≤–∞–Ω–µ –Ω–∞ —Å–Ω–∏–º–∫–∞ –¥–æ –≥–æ—Ç–æ–≤ —Å—á–µ—Ç–æ–≤–æ–¥–µ–Ω –∑–∞–ø–∏—Å - –∑–∞ —Å–µ–∫—É–Ω–¥–∏!

**–û—Å–Ω–æ–≤–Ω–∏ –ø—Ä–µ–¥–∏–º—Å—Ç–≤–∞:**
- ‚ö° **10x –ø–æ-–±—ä—Ä–∑–æ**: –û—Ç —á–∞—Å–æ–≤–µ —Ä—ä—á–Ω–∞ —Ä–∞–±–æ—Ç–∞ –¥–æ —Å–µ–∫—É–Ω–¥–∏
- üéØ **–ü–æ-–º–∞–ª–∫–æ –≥—Ä–µ—à–∫–∏**: AI –∏–∑–≤–ª–∏—á–∞ –¥–∞–Ω–Ω–∏—Ç–µ —Ç–æ—á–Ω–æ
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è**: VIES –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –î–î–° –Ω–æ–º–µ—Ä–∞
- üíº **–ì–æ—Ç–æ–≤–∏ –∑–∞–ø–∏—Å–∏**: –î–∏—Ä–µ–∫—Ç–Ω–æ –≤ –î–î–° –¥–Ω–µ–≤–Ω–∏–∫–∞

---

**–°—ä–∑–¥–∞–¥–µ–Ω–æ:** 2024-10-17
**–ü–æ—Å–ª–µ–¥–Ω–∞ –∞–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è:** 2024-10-17
**–í–µ—Ä—Å–∏—è:** 1.0
